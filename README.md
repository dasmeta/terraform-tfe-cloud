# terraform-tfe-cloud
The module allows to generate terraform setups in folders and push/link them with terraform cloud workspace, for examples look into "./tests" folder

## minimal example
```hcl
module "this" {
  source = "dasmeta/cloud/tfe"

  name           = "0-my-dns-setup"
  module_source  = "dasmeta/dns/aws"
  module_version = "1.0.0"
  module_vars = {
    zone_name   = dev.example.com
    create_zone = true
    records     = []
  }
}
```

to enable pre commit hooks run:
```sh
git config core.hooksPath githooks
```
<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | ~> 1.3 |
| <a name="requirement_tfe"></a> [tfe](#requirement\_tfe) | ~> 0.40 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_local"></a> [local](#provider\_local) | n/a |
| <a name="provider_tfe"></a> [tfe](#provider\_tfe) | ~> 0.40 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [local_file.this](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [tfe_project.project](https://registry.terraform.io/providers/hashicorp/tfe/latest/docs/resources/project) | resource |
| [tfe_workspace.this](https://registry.terraform.io/providers/hashicorp/tfe/latest/docs/resources/workspace) | resource |
| [tfe_workspace_variable_set.this](https://registry.terraform.io/providers/hashicorp/tfe/latest/docs/resources/workspace_variable_set) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_linked_workspaces"></a> [linked\_workspaces](#input\_linked\_workspaces) | The list of workspaces from where we can pull outputs and use in our module variables | `list(string)` | `null` | no |
| <a name="input_module_providers"></a> [module\_providers](#input\_module\_providers) | The list of providers to add in providers.tf | <pre>list(object({<br>    name        = string<br>    version     = string<br>    source      = optional(string)<br>    alias       = optional(string)<br>    custom_vars = optional(any, {})<br>  }))</pre> | `[]` | no |
| <a name="input_module_source"></a> [module\_source](#input\_module\_source) | The module source | `string` | n/a | yes |
| <a name="input_module_vars"></a> [module\_vars](#input\_module\_vars) | The module variables | `any` | `{}` | no |
| <a name="input_module_version"></a> [module\_version](#input\_module\_version) | The module version | `string` | n/a | yes |
| <a name="input_name"></a> [name](#input\_name) | module/repo-folder/workspace name and uniq identifier | `string` | n/a | yes |
| <a name="input_repo"></a> [repo](#input\_repo) | git/vcs repository configurations | <pre>object({<br>    identifier         = string                  # <organization>/<repository> format repo identifier<br>    branch             = optional(string, null)  # will default to repo default branch if not set<br>    ingress_submodules = optional(string, false) # whether to fetch submodules a]when cloning vcs<br>    oauth_token_id     = optional(string, null)  # the auth token generated by resource tfe_oauth_client<br>    tags_regex         = optional(string, null)  # regular expression used to trigger Workspace run for matching Git tags<br>  })</pre> | `null` | no |
| <a name="input_target_dir"></a> [target\_dir](#input\_target\_dir) | The directory where new module folder will be created, this will be terraform project repository root url | `string` | `"./"` | no |
| <a name="input_terraform_backend"></a> [terraform\_backend](#input\_terraform\_backend) | Allows to set terraform backend configurations | <pre>object({<br>    name    = string<br>    configs = optional(any, {})<br>  })</pre> | <pre>{<br>  "configs": null,<br>  "name": null<br>}</pre> | no |
| <a name="input_terraform_version"></a> [terraform\_version](#input\_terraform\_version) | The required\_version variable value for terraform{} block in versions.tf | `string` | `">= 1.3.0"` | no |
| <a name="input_variable_set_ids"></a> [variable\_set\_ids](#input\_variable\_set\_ids) | The list of variable set ids to attach to workspace | `list(string)` | `null` | no |
| <a name="input_workspace"></a> [workspace](#input\_workspace) | Terraform cloud workspace configurations | <pre>object({<br>    org                 = string<br>    tags                = optional(list(string), null)<br>    description         = optional(string, null)<br>    directory           = optional(string, "./") # this seems supposed to be the root directory of git repo<br>    global_remote_state = optional(bool, true)   # allow org workspaces access to this workspace state, TODO: there is a way to implement specific workspaces whitelisting using remote_state_consumer_ids, needs apply and testing<br>    project             = optional(string, null) # name of the project to be created and where the workspace should be created<br>    project_id          = optional(string, null) # ID of the project which already exists, if none of project and project_id is provided Default Project is used for storing workspaces<br>  })</pre> | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_debug"></a> [debug](#output\_debug) | n/a |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
